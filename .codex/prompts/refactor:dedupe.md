# 非冗長にして重複を排除する

## 目的

同じ知識/意図の複数実装を一本化し、矛盾と修正漏れを防ぐ。

## 適用場面

- 同一ロジックが3箇所以上で再実装
- マジックナンバー/リテラルが散在
- 類似ユーティリティ/ヘルパーの乱立

## 基本ルール

- 真実の所在は一箇所
- 定数・共通ロジックを共有点へ集約
- 使われないコードは削除

## 手順（最小リスク）

0. リポジトリ全体で重複を調査し、5件単位でGitHub Issue化してから着手する（MCP経由を推奨）
1. 重複箇所を洗い出し、唯一実装を決定
2. 参照側を順次置換（小さなPRで段階移行）
3. 旧実装を撤去し、テスト参照を一本化

## 測定指標（改善確認）

- 重複率↓、同義ヘルパー数↓
- 修正時の変更箇所数↓
- マジック値の出現回数↓

## アンチパターン

- 早すぎる共通化で可読性が下がる
- 巨大全能ヘルパーの作成

## 関連タグ（refactor）

`refactor:dedupe`, `refactor:simplify`（定数化・命名整理）

## コミット例

```
refactor:dedupe date range handling across billing/reporting
```
